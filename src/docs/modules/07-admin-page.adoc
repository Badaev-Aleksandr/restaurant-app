= Административная панель ресторана

:toc:
:toclevels: 2

Контроллер `AdminPageController` отвечает за:
* отображение админ-панели
* создание резерваций
* отмену резерваций
* просмотр резерваций
* загрузку PDF-меню

[cols="1,1,2,4,2",options="header"]
|===
|HTTP-метод |Путь |Параметры |Описание |Thymeleaf-шаблоны

|GET
|`/restaurant/admin`
|—
|Отображает главную страницу админ-панели с формами для создания и отмены резерваций и списком текущих бронирований.
|`admin-panel.html`

|POST
|`/restaurant/admin/reserve`
|`reservationForm` (модель `ReservationFormDto`)
|Создает новую резервацию, сохраняет данные, отправляет письмо с подтверждением резервации и уникальным кодом. При ошибках валидации или отсутствии столика возвращает форму с сообщением об ошибке.
|`admin-panel.html`, `email-template.html`

|POST
|`/restaurant/admin/cancel`
|`reservationCode` (String)
|Отменяет резервацию по коду. При успешной отмене — сообщение `Reservation cancelled successfully!`, иначе — `Reservation Code is not found`.
|`admin-panel.html`

|GET
|`/restaurant/admin/reservations/today`
|`tableNumber` (Integer)
|Показывает список резерваций на текущий день для указанного столика. Если нет бронирований — отображает сообщение об их отсутствии.
|`admin-panel.html`

|GET
|`/restaurant/admin/reservations/confirmed/by-date`
|`date` (LocalDate, формат YYYY-MM-DD)
|Отображает все подтвержденные резервации на указанную дату. Если список пуст — сообщение об отсутствии бронирований.
|`admin-panel.html`

|POST
|`/restaurant/admin/upload-menu`
|multipart `file` (PDF)
|Загружает новый PDF-файл меню, проверяет расширение и непустоту. При успешной загрузке — `Menu uploaded successfully!`, при ошибке — описание ошибки.
|`admin-panel.html`
|===

=== Примеры использования

==== Отображение админ-панели
[source,bash]
----
curl -I http://localhost:8080/restaurant/admin \
  -u admin:password
----

==== Создание резервации
[source,bash]
----
curl -X POST http://localhost:8080/restaurant/admin/reserve \
  -u admin:password \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "startDateTime=2025-05-10T19:00" \
  -d "endDateTime=2025-05-10T21:00" \
  -d "guestCount=4" \
  -d "customerName=Иван" \
  -d "customerEmail=ivan@example.com"
----

==== Отмена резервации
[source,bash]
----
curl -X POST http://localhost:8080/restaurant/admin/cancel \
  -u admin:password \
  -d "reservationCode=ABC123"
----

==== Загрузка PDF-меню
[source,bash]
----
curl -X POST http://localhost:8080/restaurant/admin/upload-menu \
  -u admin:password \
  -F "file=@/path/to/menu.pdf"
----

